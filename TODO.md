## TODO

- [X] 帧导出与优化
- [X] 神经元目的地突触寻找对齐地址算法（待验证）
- [X] 多精度权重支持（待验证）
- [X] 运行时交换文件格式约定与导出
- [X] `tick_wait_start` 与 `tick_wait_end` 前/后端支持
- [X] 网络节点间自定义延迟( `tick_relative` )前后端支持
- [X] 神经元分配策略（资源优化、延时/吞吐率优化、延时/吞吐率+资源优化）的后端支持
- [ ] 多层次结构网络组件的发现、数据流验证与后端解析
- [ ] 网络节点间自定义延迟( `tick_relative` )尝试ringbuffer优化
- [ ] 神经元计算模型随机性仿真
- [ ] 混合精度权重支持（已添加权重精度优化的**编译选项**）
- [ ] 吞吐率自适应优化：对 `CoreBlock` 的映射展开(unroll)、网络映射的最优化展开、网络映射的手动约束展开的实现
- [X] 神经元密集分配策略（待验证）
- [ ] 非二次幂的路由广播优化策略
- [ ] 带有约束的路由坐标分配
- [ ] ANN模式前/后端支持
- [ ] *网络拓扑环结构支持
- [ ] *卷积算子（全展开）前后端支持
- [ ] *卷积算子（半折叠）前后端支持

## 详情

1. 神经元目的地突触寻找对齐地址算法：聚焦 `aligned_coords` 前后所涉及的寻找神经元的目的地突触地址算法。
2. 多精度权重支持的验证：聚集 `CorePlcement` 内 `_fold_raw_weights` 前后所涉及的权重拆分算法，需要经过充分验证。
3. 神经元分配策略的后端支持：

   1. 资源优化：直接对该节点所有神经元进行密集分配，使用最少的物理核资源
   2. 延时/吞吐率优化（负载均衡）：由于节点的计算时间取决于该节点神经元全部计算完成的耗时，因此该节点神经元被分配至多个物理核上时，采取负载均衡策略，可提高节点吞吐率，优化计算延时
   3. 在1基础上，可**叠加使用密集分配策略**，对未分配满的物理核尝试分配同一节点的其他神经元段。相较于1，使用较少的物理核资源
4. 多层次结构（子网络嵌套）网络组件的发现、数据流验证与后端解析：对有层次结构（子网络例化复用等情形）的网络模型，实现在所有层次上网络组件的发现、数据流与后端解析实现。
5. 网络节点间自定义延迟( `tick_relative` )尝试ringbuffer优化：目前使用的delay_register方案，将在每个神经元组后方申请较大内存，用于存放delay至后继节点的数据。可尝试使用ringbuffer的思路对此结构进行优化。（考虑复杂度，若复杂度过高则否决）
6. 神经元计算模型随机性仿真：基于硬件神经元计算机制，实现带有部分随机数的计算机制。并考虑与硬件的实现相接近的程度（能否实现与硬件一致的随机数发生行为，或接近？）
7. 混合精度权重支持：在第3点功能的实现上，对于网络中存在不同精度的突触情况，需要在后端实现对不同精度突触分组的处理。预期提供一个编译选项：

   - 当开启时，当不同精度突触被分在同一组时，将按照最大精度权重进行，当分在不同组时，按各自权重处理
   - 当关闭时，不同精度突触将**不被分在同一组**
8. 吞吐率自适应优化：对 `CoreBlock` 的映射展开(unroll)、网络映射的最优化展开、网络映射的手动约束展开的实现。网络在硬件上映射，以 `CoreBlock` 描述。为提高吞吐率，可对 `CoreBlock` 进行展开(unroll) 操作，即不密布在最少物理核，而占用更多的物理核，从而提高吞吐率。需要考虑该步骤在后端流程中何处实施、网络各层 unrolling factor 的整体优化策略、后端自动推断最优化策略、手动进行展开约束的情况下的实现等。
9. 神经元密集分配策略：目前默认采用按类别对多神经组进行划分。在第2点的基础上，验证密集分配策略及后续相关算法。
10. 带有约束的路由坐标分配：考虑如下情形，由于芯片硬件限制，当网络部署在芯片外圈，其工作频率高于芯片中心位置。由此需要路由分配时附加**一定的约束条件**与**最优化目标**，从而大改路由相关算法。在此之后，如果代码修改得好，则后续可以实施不同的路由约束条件。
11. ANN模式前/后端支持：目前仅支持芯片的SNN模式。要想支持ANN模式，前端上需要添加ANN模式的算理，同时，ANN/SNN模式是物理核的行为，因此当网络拓扑中同时存在两种模式的神经元时，需要以此为约束条件，从而影响分组结果（类似第6点。例如，同为ANN模式下的不同神经元可被分在同一组）
12. 后三点暂不考虑。
